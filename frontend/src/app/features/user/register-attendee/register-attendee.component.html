<div class="container mat-elevation-z4">
  <div class="profile-header">
    <h1>Register</h1>
  </div>

  <div class="profile-content">
    <mat-card class="profile-card">
      <mat-card-content>
        <mat-stepper [linear]="isLinear" #stepper>
          <!-- Step 1: User Creation -->
          <mat-step [stepControl]="accountFormGroup" [editable]="false">
            <form [formGroup]="accountFormGroup">
              <ng-template matStepLabel>Credentials</ng-template>

              <div class="form-fields">
                <mat-form-field appearance="outline">
                  <mat-label>Username</mat-label>
                  <input matInput formControlName="usernameCtrl" required />
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Email</mat-label>
                  <input
                    matInput
                    type="email"
                    formControlName="emailCtrl"
                    required
                  />
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Password</mat-label>
                  <input
                    matInput
                    type="password"
                    formControlName="passwordCtrl"
                    required
                  />
                </mat-form-field>
              </div>

              <button
                mat-stroked-button
                (click)="createAccount()"
                color="primary"
                [disabled]="accountFormGroup.invalid"
              >
                Next
              </button>
            </form>
          </mat-step>

          <!-- Step 2: Personal Information -->
          <mat-step [stepControl]="personalFormGroup" [editable]="false">
            <form [formGroup]="personalFormGroup">
              <ng-template matStepLabel>Personal Information</ng-template>

              <div class="form-fields">
                <mat-form-field appearance="outline">
                  <mat-label>First Name</mat-label>
                  <input matInput formControlName="firstNameCtrl" required />
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Last Name</mat-label>
                  <input matInput formControlName="lastNameCtrl" required />
                </mat-form-field>
              </div>

              <div class="form-fields">
                <mat-form-field appearance="outline">
                  <mat-label>Birthday</mat-label>
                  <input
                    matInput
                    [matDatepicker]="picker"
                    formControlName="birthdayCtrl"
                    required
                  />
                  <mat-datepicker-toggle
                    matSuffix
                    [for]="picker"
                  ></mat-datepicker-toggle>
                  <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Phone</mat-label>
                  <input matInput formControlName="phoneCtrl" required />
                </mat-form-field>
              </div>

              <div>
                <button
                  mat-stroked-button
                  (click)="createUserProfile()"
                  color="primary"
                  [disabled]="personalFormGroup.invalid"
                >
                  Next
                </button>
              </div>
            </form>
          </mat-step>

          <!-- Step 3: Address Information -->
          <mat-step [stepControl]="addressFormGroup" [editable]="false">
            <form [formGroup]="addressFormGroup">
              <ng-template matStepLabel>Address Information</ng-template>

              <div class="form-fields">
                <mat-form-field appearance="outline">
                  <mat-label>Street</mat-label>
                  <input matInput formControlName="streetCtrl" required />
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Number</mat-label>
                  <input matInput formControlName="numberCtrl" required />
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Apartment / Suite</mat-label>
                  <input matInput formControlName="apartmentSuiteCtrl" />
                </mat-form-field>
              </div>

              <div class="form-fields">
                <mat-form-field appearance="outline">
                  <mat-label>City</mat-label>
                  <input matInput formControlName="cityCtrl" required />
                </mat-form-field>

                <mat-form-field appearance="outline">
                  <mat-label>Postal Code</mat-label>
                  <input matInput formControlName="postalCodeCtrl" required />
                </mat-form-field>

                <app-country-picker
                  formControlName="countryISO3Ctrl"
                  style="margin-top: 15px"
                >
                </app-country-picker>
              </div>
              <div>
                <button
                  mat-flat-button
                  (click)="createAddress()"
                  color="primary"
                  [disabled]="addressFormGroup.invalid"
                >
                  Register
                </button>
              </div>
            </form>
          </mat-step>
        </mat-stepper>
      </mat-card-content>
    </mat-card>
  </div>
</div>
